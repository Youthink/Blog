---
title: react 开发实践
date: 2018-05-21 22:15:35
updated: 2018-05-21 22:15:35
tags:
categories: 编程
---

1、react 带来的新的前端思维方式

通过组件开发应用 独立、可复用的代码

jsx

不是这样， JSX 的 onClick事件处理方式和 HTML 的 onclick有很大不同 。 即使现在，我们还是要说在 HTML 中直接使用 onclick很不专业，原因如下:
口 onclick添加的事件处理函数是在全局环境下执行的，这污染了全局环境，很容
易产生意料不到的后果;
U 给很多 DOM 元素添加 onclick事件，可能会影响网页的性能，毕竟，网页需要

的事件处理函数越多，性能就会越低;
口对于使用 onclick 的 DOM 元素，如果要动态地从 DOM 树中删掉的话，需要把对应
的时间处理器注销，假如忘了注销，就可能造成内存泄露，这样的 bug很难被发现。 上面说的这些问题，在 JSX 中都不存在 。
首先， onClick 挂载的每个函数，都可以控制在组件范围内，不会污染全局空间 。 我们在 JSX 中看到一个组件使用了 onClick，但并没有产生直接使用 onclick (注意
是 onclick不是 onClick)的 HTML，而是使用了事件委托(event delegation)的方式处理 点击事件，无论有多少个 onClick出现，其实最后都只在 DOM树上添加了一个事件处理 函数，挂在最顶层的 DOM 节点上。所有的点击事件都被这个事件处理函数捕获，然后 根据具体组件分配给特定函数，使用事件委托的性能当然要比为每个 onClick都挂载一 个事件处理函数要高 。
因为 React控制了组件的生命周期，在 unmount 的时候自然能够清除相关的所有事 件处理函数，内存泄露也不再是一个问题。


UI=render(data)

2、react 和 Jquery 的开发方式有什么不同

在 jQuery 的解决方案中，首先根据 css 规则找到 id 为 clickCount 的按钮，挂上 一 个匿名事件处理函数，在事件处理函数中，选中那个需要被修改的 DOM 元素，读取其 中的文本值，加以修改，然后修改这个 DOM 元素 。
选中一些 DOM 元素，然后对这些元素做一些操作，这是一种最容易理解的开发模 式 。 jQuery 的发明人 John Resig 就是发现了网页应用开发者的这个编程模式，才创造出 了 jQuery，其一 问世就得到普遍认可，因为这种模式直观易懂 。 但是，对于庞大的项目， 这种模式会造成代码结构复杂，难以维护，每个 jQuery 的使用者都会有这种体会 。

打一个比方， React是一个聪明的建筑工人，而 jQuery是一个比较傻的建筑工人， 开发者你就是一个建筑的设计师，如果是 jQuery 这个建筑工人为你工作，你不得不事无 巨细地告诉 jQuery“如何去做”，要告诉他这面墙要拆掉重建，那面墙上要新开一个窗户， 反之，如果是 React这个建筑工人为你工作，你所要做的就是告诉这个工人“我想要什 么样子”，只要把图纸递给 React这个工人，他就会替你搞定一切，当然他不会把整个建 筑拆掉重建，而是很聪明地把这次的图纸和上次的图纸做一个对比，发现不同之处，然 后只去做适当的修改就完成任务了 。
显而易见， React 的工作方式把开发者从繁琐的操作中解放出来，开发者只需要着重 “我想要显示什么”，而不用操心“怎样去做” 。
这种新的思维方式，对于一个简单的例子也要编写不少代码，感觉像是用高射炮打 蚊子，但是对于一个大型的项目，这种方式编写的代码会更容易管理，因为整个 React 应用要做的就是渲染，开发者关注的是渲染成成什么样子，而不用关心如何实现增量 渲染。
React 的理念 ，归结为一个公式，就像下面这样 : UI=render(data)

让我们来看看这个公式表达的含义，用户看到的界面( UI)，应该是一个函数(在这 里叫 render)的执行结果，只接受数据( data)作为参数。 这个函数是一个纯函数，所谓 纯函数，指的是没有任何副作用，输出完全依赖于输入的函数，两次函数调用如果输人 相同，得到的结果也绝对相同 。 如此一来，最终的用户界面，在 render 函数确定的情况 下完全取决于输入数据 。
对于开发者来说，重要的是区分开哪些属于 data，哪些属于 render，想要更新用户 界面，要做的就是更新 data，用户界面自然会做出响应，所以 React实践的也是“响应 式编程”( Reactive Programming)的思想，这也就是 React 为什么叫做 React 的原因 。


Virtual DOM

深入介绍构建高质量 React组件的原则和方法，

划分组件边界的原则;

React 组件的数据种类;

React组件的生命周期 。

React天生具有高内聚的特点 。

“差劲的程序员操心代码，优秀的程序员操心数据结构和它们之间的关系 。”  一一LinusTorvalds, Linux创始人

React组件的数据分为两种， prop和 state，无论 prop或者 state 的改变，都可能引
发组件的重新渲染

设计一个组件的时候，什么时候选择用 prop什么时候选择用

state 呢?其实原则很简单， prop 是组件的对外接口， state 是组件的内部状态，对外用
prop，内部用 state。

babel-react-optimize 生产环境去掉 propsType

组件不应该改变 prop 的值，而 state存在的目的就是让组件来改变的 。

React严格定义了组件的生命周期，生命周期可能会经历如下三个过程:

装载过程( Mount)，也就是把组件第一次在 DOM 树中渲染的过程;

更新过程( Update)，当组件被重新渲染的过程;
口卸载过程( Unmount)，组件从 DOM 中删除的过程 。

虚拟DOM的实现

问题

1、生命周期的执行过程

2、React的优势

3、和传统开发的对比

4、props 和 state



